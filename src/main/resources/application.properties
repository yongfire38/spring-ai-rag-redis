spring.application.name=spring-ai-rag-redis

# Ollama 설정
spring.ai.ollama.base-url=http://localhost:11434
spring.ai.ollama.chat.model=qwen3-4b:Q4_K_M
spring.ai.ollama.chat.options.temperature=0.4

# Redis 연결 설정
spring.data.redis.host=localhost
spring.data.redis.port=6379

# Redis 벡터 저장소 설정
# 처음 실행 시에만 true로 설정하고, 이후에는 false로 변경하여 중복 데이터 방지
spring.ai.vectorstore.redis.initialize-schema=true
spring.ai.vectorstore.redis.index-name=document-index

# 로컬 ONNX 모델 사용 설정
spring.ai.model.embedding=transformers

spring.ai.embedding.transformer.onnx.modelUri=classpath:model/model.onnx
spring.ai.embedding.transformer.tokenizer.uri=classpath:model/tokenizer.json

#모델 출력 이름 설정 (ko-sroberta-multitask 모델에 맞게)
spring.ai.embedding.transformer.onnx.modelOutputName=token_embeddings

# 문서 경로 설정
spring.ai.document.path=file:C:/workspace-test/upload/data/**/*.md
spring.ai.document.pdf-path=file:C:/workspace-test/upload/data/**/*.pdf

# PDF 리더 설정
spring.ai.document.pdf.page-top-margin=0
spring.ai.document.pdf.pages-per-document=1

# 요약 생성 설정 여부
spring.ai.document.enable-summary=false
# 요약을 생성할 최소 청크 수 (기본값: 5)
spring.ai.document.summary-min-chunks=2

# 키워드 추출 설정 여부
spring.ai.document.enable-keywords=false
spring.ai.document.keyword-count=5

# 청크 크기 설정 (토큰 단위)
spring.ai.document.chunk-size=2000
# 최소 청크 크기 (문자 단위)
spring.ai.document.min-chunk-size-chars=5
# 최대 청크 수
spring.ai.document.max-num-chunks=300

# 임베딩할 최소 청크 길이
spring.ai.document.min-chunk-length-to-embed=50

# 로깅 설정
logging.level.com.example.chat=DEBUG

# 빈 오버라이딩 허용 (임베딩 모델 빈 충돌 해결)
spring.main.allow-bean-definition-overriding=true

logging.level.org.springframework.ai=INFO

# DJL 관련 로그 레벨 조정 (성능 최적화 경고 숨김)
logging.level.ai.djl.pytorch.engine.PtEngine=WARN
logging.level.ai.djl=WARN

# DJL 성능 최적화 설정 (선택사항)
spring.ai.embedding.transformer.djl.optimization.enabled=true
spring.ai.embedding.transformer.djl.threads=4

# RAG 프롬프트 패턴 설정
# 사용 가능한 패턴: basic, zero-shot, few-shot, chain-of-thought, structured, expert, concise, educational, role-based, step-by-step
rag.prompt.pattern=zero-shot

# RAG 유사도 임계값 설정 (0.0 ~ 1.0)
rag.similarity.threshold=0.30

# RAG 검색 결과 개수 (Top K)
rag.top-k=3

# 문서 정규화 설정
# 정규화 기능 활성화 여부
spring.ai.document.normalization.enabled=true
# HTML 태그 제거 여부
spring.ai.document.normalization.remove-html-tags=true
# 마크다운 코드 블록 제거 여부
spring.ai.document.normalization.remove-code-blocks=false
# 공백 정규화 여부
spring.ai.document.normalization.normalize-whitespace=true
# 줄바꿈 정규화 여부
spring.ai.document.normalization.normalize-newlines=true
# 특수문자 정리 여부
spring.ai.document.normalization.clean-special-chars=true